package days2020;

import java.util.stream.IntStream;

public class Day3_Toboggan_trajectory {
	public static String getInput() {
		return ".#..........#......#..#.....#..\n" +
				"....#.............#.#....#..#..\n" +
				".....##...###....#..#.......#..\n" +
				".#....#..#......#........#.....\n" +
				".#.........###.#..........##...\n" +
				"...............##........#.....\n" +
				"#..#..........#..##..#....#.#..\n" +
				"....#.##....#..#...#.#....#....\n" +
				"...###...#............#.#......\n" +
				"#.........#..#...............#.\n" +
				"#.#...........#...............#\n" +
				"..#.#......#..###.#...#..##....\n" +
				".....#..#..#..#............#...\n" +
				"......#.......#.....#....##....\n" +
				"#......#...#.......#.#.#.......\n" +
				"...........##.#.............#..\n" +
				".#.........#..#.####...........\n" +
				"..#...........#....##..........\n" +
				"#...........#.......#..#.#.....\n" +
				".....##...#.....#..##..#..#....\n" +
				"#.#..........................#.\n" +
				"##.....#..........#.......##..#\n" +
				"....#..#............#.#.#......\n" +
				".......#.......#..#............\n" +
				"...#.#..........#..#.....#.....\n" +
				".....#...##..##.....##........#\n" +
				".#.....#........##............#\n" +
				"..#....#.#...#.....#.##........\n" +
				"........##.....#......##...##..\n" +
				"......#..................#.....\n" +
				"..##......##.....##...##.......\n" +
				"......#..#...##......##........\n" +
				".#..#..#.#.....................\n" +
				".#....#.#...#....#.......##...#\n" +
				".####.#..##...#.#.#....#...#...\n" +
				".#....#.....#...#..#.........##\n" +
				"...........#.#####.#.#..##..#..\n" +
				".#......##...#..###.#.#....#...\n" +
				"...#.....#........#..###...#...\n" +
				".......#................##.#...\n" +
				".##...#.#..................#...\n" +
				"..#........#....#..........#..#\n" +
				"..#.........#..................\n" +
				"...#.#..........#.#..##........\n" +
				"...#.##..........##...........#\n" +
				"...........#..#........#.......\n" +
				".#....#.#...........#....#.##..\n" +
				".#...#..#............#....#.#..\n" +
				"...#..#...#.........####.#.#...\n" +
				"..#...#...........###..#...##.#\n" +
				"......##...#.#.#....##....#....\n" +
				"#..#.#.....##....#.......#...#.\n" +
				".#.....#.....#..#..##..........\n" +
				"................#.#.#...##.....\n" +
				".#.....#............#......#...\n" +
				"...#...#..#.#....######.....#..\n" +
				"..#..........##......##.....#..\n" +
				"......#..#.##...#.#............\n" +
				"....#.......#..#...#..#.#......\n" +
				"#......##.#..#........#.....#..\n" +
				"..#.........#..#.........#.....\n" +
				"..#.........##.......#.#.#..##.\n" +
				"...#....##.................#.#.\n" +
				"...#........##.#.......#.##..##\n" +
				"....#.#...#...#....#...........\n" +
				".........#....##........#......\n" +
				"...#........#..#.......#...#...\n" +
				"#.......#....#...#...........#.\n" +
				".......#......#...##...........\n" +
				".#.#......##.#.......#..#...#..\n" +
				".#.....##.#...#......#..#......\n" +
				"........#.............#.#..#..#\n" +
				"#...........#....#.....#.##.#.#\n" +
				"................#...#........##\n" +
				"#..#.##..#.....#...##.#........\n" +
				"#.....#.#..##......#.#..#..###.\n" +
				"....#...#.....#................\n" +
				"......#...#..##...........#....\n" +
				"......#.........##.#...#......#\n" +
				"#...#.#.....#..#.#..#..#......#\n" +
				"...#.#..#..#.#........###.#....\n" +
				"..#...#.......#.#.......#......\n" +
				"...#....#.....#.......#......#.\n" +
				"#...........#....#..#..#.......\n" +
				"..........##......##.........##\n" +
				"##............#..#.#...#..#.#..\n" +
				"..#.##....##...##..#...#.......\n" +
				"............##.##..###..#..#...\n" +
				"......#....##...##.........#...\n" +
				"......#..#.#......####..#......\n" +
				"..............#....#..#..##....\n" +
				"...#.#..#...##.#.......#.#.....\n" +
				"...#.#....#.......#..#..#..##..\n" +
				"..........#.........#..........\n" +
				"...#.....#............#.....##.\n" +
				"....#.#......................#.\n" +
				".........#...#.#...#...........\n" +
				"...#........#..##.....#...#.#..\n" +
				"......##.....#.#..#...###.#...#\n" +
				"#....#..#.#.....#...#..........\n" +
				".#.##.###.........#..##.#....#.\n" +
				"#.........#....#........#...#..\n" +
				"...........#...............#..#\n" +
				"###....................#....#..\n" +
				".................#....#.....#..\n" +
				"..........#.........#.......#..\n" +
				"........#..#....#.....##.......\n" +
				"#...##.#...#.#.#............#..\n" +
				"....#.........##.#.#..#...###..\n" +
				".##..............#...#.....##.#\n" +
				"###...#..................#...#.\n" +
				".....#..#...#..#...#...........\n" +
				".#.................#...#..#..#.\n" +
				".#.........###...#.##......###.\n" +
				".####............#......#..#...\n" +
				"....#........#..#.#....#..##..#\n" +
				"..#....#.#...#.#.....##....#...\n" +
				"..###..#..#....##....#..#..#...\n" +
				"...#.#.....#.#....#.....#......\n" +
				".....#..........#.#............\n" +
				".......#...........#.#..#..#...\n" +
				"......##........#.....#.......#\n" +
				"..#.#.....##............#..##..\n" +
				"....#.#........#...........##..\n" +
				"#......#..##........#.....#....\n" +
				"#...#...###..............##....\n" +
				"#..#........#........#.....##.#\n" +
				"......##.####........#..#....#.\n" +
				"...##..#.##.....#...#...#..#...\n" +
				"#..............###.##..##......\n" +
				"......................#.....#..\n" +
				".........#.#.......#...##.#....\n" +
				"....#......#..........###..#...\n" +
				"#...####.#.................#..#\n" +
				"##.#....#....#.....##..#....#.#\n" +
				"..#.....#..##.........#.#..#.#.\n" +
				".....#.....#...................\n" +
				"#....##.#.........###....#.....\n" +
				"#........#.#.......#.#.........\n" +
				".##.#...#.....#...#.......##.##\n" +
				"#..#.............#.............\n" +
				"..........#.........####.......\n" +
				"..##..............#..#.#.......\n" +
				"..#.#.....#........#......##...\n" +
				"#.#.......#.#................#.\n" +
				".#...#........#....##....#.##..\n" +
				".#..#...#...#......#.#.........\n" +
				"......##............#.........#\n" +
				".#....#.#.#.........#..#..##...\n" +
				"#....#......#.......###........\n" +
				".......#........##..#...#..###.\n" +
				"#.##..........#..###..#..#.#...\n" +
				".#..#....#..........#.#.##.....\n" +
				"#..#...#.#...#..#..#.#...#.....\n" +
				".........#...#.#............#..\n" +
				"#..#.............#......##.##..\n" +
				"...##.......#..................\n" +
				"....#......#...#.....#......#..\n" +
				".....##..#......#....#....#....\n" +
				"....#...#...#...#.....#........\n" +
				".#....#........##....#..#.#...#\n" +
				"#.......#..#......#......#...#.\n" +
				"..............#......#......#..\n" +
				"#......#..##...#........#....#.\n" +
				"#..#..#..#.....#..#........#...\n" +
				"#...#.....#...#..........#...##\n" +
				"........#.......#...#.....#.#..\n" +
				"...................##.......#..\n" +
				".#......#........#.##..#....#..\n" +
				".....#.....#...#..#..#......#..\n" +
				"........##.#..##.........#....#\n" +
				".........#.......#.............\n" +
				"............#.###.###..#.#.....\n" +
				".............#....#...........#\n" +
				"..#.....#.#..##.##........#....\n" +
				"...#....#....#.........#.....#.\n" +
				".#............#......#.........\n" +
				"..#.#..........##.##......#.#..\n" +
				"....#.........................#\n" +
				"..........##...................\n" +
				"#.......#.#..............#...#.\n" +
				"...##..#..##...##.#..#.#.#.....\n" +
				"...########.#..##....#.........\n" +
				"##.#........##.....#........#..\n" +
				"#.#.....#........#..#....#...#.\n" +
				"..#............#.......###.##.#\n" +
				"#.#............................\n" +
				"...#.#.#....#..........#..#....\n" +
				"..###.#.....#.#..#.............\n" +
				"#........#..........#.#..#.....\n" +
				"...........#..#....#.........#.\n" +
				"..#............#.....#.#.......\n" +
				"#.#............#..#.....#.#.#..\n" +
				"...#...#.......................\n" +
				".#.#.#...##.............#..#..#\n" +
				"..#.........#..#.....##....##..\n" +
				".#...#............#.......#..##\n" +
				"....#..#.#.#...####............\n" +
				"#.......#....#..##....##....#..\n" +
				".....##.#....#.#..#.......#....\n" +
				"...........#.......#....##.#.##\n" +
				"..........#...#....##...#.#....\n" +
				"..#.............#.............#\n" +
				"....#..#.....#....#.#..###.#...\n" +
				".......#.##.#......#...##...#.#\n" +
				".#..#.#..#.#.......#....###.#..\n" +
				"#..........##...##.........##..\n" +
				"##..#......##.#.####.#.....#...\n" +
				"....#.#...#........#..##..#.#..\n" +
				".#.............................\n" +
				".##..#.#...##.....#....#.....#.\n" +
				"..##.........#......#.........#\n" +
				".#.#........#...#.#.#....##....\n" +
				".#.................##.........#\n" +
				"...#...............#....#......\n" +
				"..#...#..#..........###..#...##\n" +
				"..........#..#..........##..#..\n" +
				"...#.............#.##.#...#....\n" +
				"...#...........#...............\n" +
				"......#.........##.#...#...#...\n" +
				"...#.#........#..#.....#..#...#\n" +
				"#.#...#....##...#.....#....#...\n" +
				"#.#.#..#.....#.........#.......\n" +
				"##...........#..####...........\n" +
				"#..........#........###...#..#.\n" +
				"#..#.......#....#......###.....\n" +
				"..#.....#......#.###......##...\n" +
				"...#.##..#............#...#....\n" +
				".##........#.....#.............\n" +
				"#....#.##..#...........##.#.#..\n" +
				"..#.....#.#....#.......#......#\n" +
				"#..#.......#............#......\n" +
				"#.......##....#...#..#.........\n" +
				".................#..##.........\n" +
				"..............#..#..#.##.......\n" +
				"#.#.......................#..#.\n" +
				"..#..##...........#....#..#..#.\n" +
				"...#....#.......#.......#....#.\n" +
				".....#.#..#.#.....#.........#.#\n" +
				"..#.#.........#.....#..........\n" +
				"...#.#.#.......#.#.......#.#..#\n" +
				"...##...#.#.#.....#.....##....#\n" +
				"##.......#.#.#.#.......#...##..\n" +
				"....#.#...........#......#.....\n" +
				".#.....#........####...........\n" +
				"#......#........#.....#..#..#..\n" +
				"..#..#......#...##.......#....#\n" +
				"#........#..........#.....#.#..\n" +
				".#...........#.....#.....#.....\n" +
				"..........#..#...#....#....##..\n" +
				".....#.#..........#.....##..#..\n" +
				"......#.........##.............\n" +
				"..#..#.....##......##........#.\n" +
				".#.#.#.#..#.#..#.......#.......\n" +
				"#.#...####.#.#....#.#........#.\n" +
				"....#...#.....#......#..##.....\n" +
				"##.........#.........#..#.#..#.\n" +
				"..#.#........#.#........#.##...\n" +
				"#....#......#...#....#.........\n" +
				".##.............###....###.#...\n" +
				"..##.#.......#...#..#......#...\n" +
				".....#.##..................#...\n" +
				".....#.#...#..#................\n" +
				"........#..#..#...........#.#.#\n" +
				"....#.###.....#..#.#.....##..##\n" +
				"....##.#.........#..##.........\n" +
				".##........#......#..###..#.##.\n" +
				".........##...............#.##.\n" +
				"..#...............#.#...#..#.#.\n" +
				"....#....##.....#...#..#.....#.\n" +
				"#...#.....................#....\n" +
				".....#.#............#...##.#.#.\n" +
				"...#......#.......#........##.#\n" +
				".#.#..#.#....#.##.......##....#\n" +
				".........#...#..##.........#...\n" +
				".#...#..#....................#.\n" +
				".......#...#........#.#..#.#.##\n" +
				".#.............#......#..#.#...\n" +
				"............##.........#....#.#\n" +
				"#.........##..##...............\n" +
				".#.#....#.#..#..........##.....\n" +
				"..###...#..#.#.......#..#...##.\n" +
				".....#....#.#............##.#..\n" +
				"##.....#.#..#..#...............\n" +
				"...##...#......#....#..#..#....\n" +
				".............#....#..#..##...##\n" +
				"#.......#............#....##..#\n" +
				"..#.##.....#.......#....#....#.\n" +
				"..........#...#.............###\n" +
				"..#....#.#..................#..\n" +
				"#.#...#..#...........#.........\n" +
				"....##..#..##..#..........#....\n" +
				"#...#...#.#....#.##...#.......#\n" +
				"#......##.#...##..#.....#......\n" +
				"....#.......#.#............#...\n" +
				"#....#...........###...........\n" +
				"#..#...#...#......#.#..#.......\n" +
				"...............................\n" +
				"#........##.............#.#....\n" +
				".............#........#....#.##\n" +
				"........##.####.....##..#......\n" +
				"#.#.#.#.......##....##.....#...\n" +
				".......#..##..#...#............\n" +
				"..........#...#....#..#.#.#.##.\n" +
				"...#........##....#...#........\n" +
				"#..#.##....#....#........#.....\n" +
				".##...#.....##...#.............\n" +
				".#...#..#.#.....#.##.....#.....\n" +
				"...........#.............#...#.\n" +
				".#..#................#...#..#..\n" +
				"#..........#......##..##....#..\n" +
				"####..#...........#.#....#.....\n" +
				"..#.#.##..#...##........#....##\n" +
				".#.......##........#.....#.....\n" +
				"............#................#.\n" +
				".#...#...#.....#.#....#.##..#..\n" +
				"..#.............#.#....#.#.....\n" +
				"..............#...........#....\n" +
				"..............#........#....#..\n" +
				"..........##........#..#...#...\n" +
				"...#.#....#.#....#..#.....#...#\n" +
				"..#......#...........#..#..#.#.\n" +
				".....##.....#.####....#........";
	}

	public static void main(String[] args) {
		System.out.println("answer A: " + runA(getInput()));
		System.out.println("answer B: " + runB(getInput()));
	}

	public static long runA(String input) {
		String[] lines = input.split("\n");
		int numChars = lines[0].length();
		return IntStream.range(0, lines.length)
				.filter(i -> lines[i].charAt((i * 3 ) % numChars) == '#')
				.count();
	}

	public static long runB(String input) {
		String[] lines = input.split("\n");

		return checkSlope(lines, 1, 1) *
				checkSlope(lines, 3, 1) *
				checkSlope(lines, 5, 1) *
				checkSlope(lines, 7, 1) *
				checkSlope(lines, 0.5, 2);

	}

	public static long checkSlope(String[] lines, double right, int down) {
		int numChars = lines[0].length();
		return IntStream.range(0, lines.length)
				.filter(i -> {
					if(i % down != 0) {
						return false;
					}
					return lines[i].charAt(((int) (i * right)) % numChars) == '#';
				})
				.count();
	}

}
